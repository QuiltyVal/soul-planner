# Soul Planner — Design Document

## 📌 Обзор проекта

**Soul Planner** — геймифицированный планировщик задач с духовной/загробной тематикой. Задачи "живут", "умирают" и "воскресают". Приложение построено как SPA на чистом HTML/CSS/JS. Mobile-first, тёмная тема.

---

## 🎮 Концепция и метафора

Каждая задача — это **душа**. Она рождается живой и горячей, но со временем остывает. Если пользователь не взаимодействует с ней — душа попадает в **Чистилище**, а потом **умирает** и попадает на **Кладбище**. Если задача выполнена — она возносится в **Рай**.

Два персонажа-помощника:
- **Ангел** 😇 — мотивирует, хвалит, предупреждает об угасающих задачах
- **Дьявол** 😈 — злорадствует, провоцирует, радуется смертям задач

---

## 🏗️ Структура экранов

### Главный экран (3 вкладки)

```
┌─────────────────────────────────────┐
│  ⚡ 42 SOUL POINTS        (top-right)│
│                                      │
│     👻 Soul Planner 👻              │
│  Keep your tasks alive... or let     │
│  them perish                         │
│                                      │
│  ┌──────┬──────────┬────────┐       │
│  │🔥Active│🪦Cemetery│☁️Heaven │       │
│  └──────┴──────────┴────────┘       │
│                                      │
│  ═══ ACTIVE ZONE ═══                │
│  ┌─ Task Card ──────────────┐       │
│  │ 🔥 Buy groceries         │       │
│  │ ████████░░ Hot 85%        │       │
│  │ ⏱ 20h left  Updated 4h ago│      │
│  │               🔄 ✅ 💀    │       │
│  └───────────────────────────┘       │
│                                      │
│  ═══ PURGATORY ═══                  │
│  ┌─ Task Card (amber glow) ─┐       │
│  │ 🥶 Clean the kitchen     │       │
│  │ ███░░░░░ Cold 28%         │       │
│  │ 💀 8h to death            │       │
│  │               🔄 ✅ 💀    │       │
│  └───────────────────────────┘       │
│                                      │
│  ┌──────────────────────────┐       │
│  │ What's on your soul today?  [+]  │
│  └──────────────────────────┘       │
│                                      │
│ 😇(angel)              😈(devil)    │
│ "Don't give up!"  "Let it die..."   │
└─────────────────────────────────────┘
```

### Вкладка Cemetery (Кладбище)

```
┌─────────────────────────────────────┐
│  Grid карточек-надгробий:           │
│                                      │
│  ┌──────────┐  ┌──────────┐        │
│  │   🪦      │  │   🪦      │        │
│  │  R.I.P.   │  │  R.I.P.   │        │
│  │ Do laundry│  │ Call mom   │        │
│  │ Feb 1-Feb3│  │ Jan 20-25 │        │
│  │ ☠️☠️      │  │  -5 pts   │        │
│  │ 🔄Resurrect│ │ 🔄Resurrect│       │
│  └──────────┘  └──────────┘        │
└─────────────────────────────────────┘
```

### Вкладка Heaven (Рай)

```
┌─────────────────────────────────────┐
│  Grid облачков-карточек:            │
│                                      │
│  ┌──────────┐  ┌──────────┐        │
│  │    ✨      │  │    ✨      │        │
│  │   🕊️      │  │   🕊️      │        │
│  │ Fix bug   │  │ Send email │        │
│  │Ascended   │  │Ascended    │        │
│  │ Feb 20    │  │ Feb 18     │        │
│  │ +10 pts   │  │ +10 pts    │        │
│  └──────────┘  └──────────┘        │
└─────────────────────────────────────┘
```

---

## 🎨 Текущая цветовая палитра

| Token             | Цвет (HEX) | Использование                    |
|--------------------|-------------|----------------------------------|
| `--bg-primary`     | `#0f0a1a`   | Основной фон (тёмно-фиолетовый) |
| `--bg-secondary`   | `#1a1128`   | Вторичный фон, панели            |
| `--bg-card`        | `#221838`   | Фон карточек задач               |
| `--bg-card-hover`  | `#2d2048`   | Hover-состояние карточек         |
| `--purple-glow`    | `#8b5cf6`   | Основной акцент, glow-эффекты    |
| `--green-glow`     | `#22c55e`   | Активные задачи, "горячие"       |
| `--amber-glow`     | `#f59e0b`   | Чистилище, warning               |
| `--red-glow`       | `#ef4444`   | Danger, смерть задачи            |
| `--gold-glow`      | `#fbbf24`   | Рай, Soul Points, ангел          |
| `--blue-glow`      | `#3b82f6`   | Touch/обновить, cool-состояние   |
| `--heaven-gold`    | `#fde68a`   | Текст в раю                      |
| `--cemetery-gray`  | `#6b7280`   | Кладбище, мёртвые элементы       |
| `--text-primary`   | `#f1e8ff`   | Основной текст (лёгкий фиолет)  |
| `--text-secondary` | `#a78bdb`   | Вторичный текст                  |
| `--text-muted`     | `#6b5a8a`   | Приглушённый текст               |

---

## 🔤 Типографика

| Шрифт     | Использование                            |
|-----------|------------------------------------------|
| **Outfit** (400–800) | Основной UI-шрифт (body, кнопки, мета) |
| **Creepster** | Display-шрифт: заголовок, названия зон, "R.I.P." |
| **Inter** (fallback) | Запасной sans-serif                    |

---

## 🧩 Компоненты UI

### 1. Score Panel (Панель очков)
- **Расположение:** Фиксировано, top-right
- **Стиль:** Стекломорфизм (backdrop-filter: blur), фиолетово-голубой градиент
- **Содержимое:** ⚡ иконка + число очков + подпись "SOUL POINTS"
- **Анимации:** Пульсация иконки, pop-up при +очках (зелёный), shake при −очках (красный)

### 2. Tab Navigation (Навигация)
- 3 вкладки: 🔥 Active | 🪦 Cemetery | ☁️ Heaven
- **Стиль:** Pill-навигация с фоном `--bg-secondary`
- **Активная вкладка:** Фиолетово-голубой градиент + glow
- **Hover:** Лёгкий фиолетовый фон

### 3. Task Card (Карточка задачи)
- **Размер:** Полноширинная (max-width 700px контейнер)
- **Layout:** Flex row: [emoji статуса] [info блок] [3 кнопки действий]
- **Боковая полоска:** 3px слева — зелёная (active) / янтарная (purgatory)
- **Heat Gauge (термометр):** Горизонтальная полоска с shimmer-анимацией
  - 🔥 Hot (>75%) = зелёный
  - 🌡️ Warm (50-75%) = янтарный
  - 🥶 Cold (25-50%) = голубой
  - 💀 Freezing (<25%) = красный
- **Progress Bar:** Тонкая (3px) полоска внизу карточки
- **Кнопки действий:** 🔄 Touch | ✅ Complete | 💀 Kill
  - Квадратные 36×36px, hover-glow в цвет действия
- **Анимации:**
  - `slideIn` при появлении
  - `ascend` при выполнении (взлетает вверх + shrink)
  - `die` при смерти (падает вниз + rotate + fade)
  - `purgatory-pulse` для задач в чистилище

### 4. Tombstone (Надгробие)
- **Форма:** Скруглено сверху (60px radius), прямые углы снизу
- **Градиент:** Тёмно-серый → фиолетово-тёмный (сверху вниз)
- **Содержимое:** 🪦 + "R.I.P." (Creepster) + имя задачи + даты + штрафные очки
- **Death Tally:** ☠️ × количество смертей
- **Кнопка Resurrect:** Маленькая, фиолетовый gradient, hover-glow
- **Анимация:** `tombstone-rise` при появлении

### 5. Cloud (Облачко — Рай)
- **Форма:** Сильно скруглённая (28px radius)
- **Фон:** Полупрозрачный золотистый градиент
- **Содержимое:** ✨ + 🕊️ (с анимацией крыльев) + имя + дата + очки
- **Анимации:** 
  - `cloud-float` — лёгкое покачивание
  - `wing-flap` — "крылья" у голубя
  - `spin-slow` — вращение ✨ гало
- **Hover:** Поднимается + усиленный золотой glow

### 6. Angel & Devil (Помощники)
- **Расположение:** Фиксировано внизу: ангел — слева, дьявол — справа
- **Аватар:** Круг 56px, emoji 2rem
  - Ангел: золотистый gradient border и glow, bob-анимация
  - Дьявол: красный gradient border и glow, shake-анимация
- **Speech Bubble:** Появляется над аватаром
  - Стекломорфизм (blur)
  - Ангел: золотистый текст + рамка
  - Дьявол: красноватый текст + рамка
  - "Хвостик" треугольный уголок снизу
  - Показывается на 5 секунд с fade-in/out

### 7. Add Task (Поле добавления)
- **Стиль:** Dashed border, полноширинное
- **Input:** Тёмный полупрозрачный фон, фиолетовый focus-glow
- **Кнопка "+":** 50×50px, фиолетовый gradient, hover-rotate 90°, active-shrink

---

## ✨ Анимации и эффекты

| Анимация          | Где используется           | Описание                                      |
|-------------------|----------------------------|-----------------------------------------------|
| `float`           | Иконки-призраки в заголовке| Плавное качание вверх-вниз                    |
| `pulse-icon`      | ⚡ иконка очков            | Пульсация масштаба                            |
| `dot-pulse`       | Точки у секций             | Пульсация + fade                              |
| `slideIn`         | Появление карточек         | Въезд слева + fade-in                         |
| `ascend`          | Выполнение задачи          | Взлёт вверх + уменьшение + fade               |
| `die`             | Смерть задачи              | Падение + rotate + fade                       |
| `purgatory-pulse` | Карточки в чистилище       | Мерцание янтарной тени                        |
| `flicker`         | Боковая полоска чистилища  | Мерцание opacity                              |
| `blink`           | Таймер в danger            | Мигание                                       |
| `heat-shimmer`    | Heat gauge                 | Бегущий блик по полоске                        |
| `tombstone-rise`  | Надгробия                  | Всплытие снизу                                |
| `cloud-float`     | Облачка в раю              | Покачивание                                   |
| `wing-flap`       | 🕊️ в облачках             | Отзеркаливание по X                           |
| `spin-slow`       | ✨ гало                    | Медленное вращение                            |
| `angel-bob`       | Ангел                      | Лёгкое покачивание                            |
| `devil-shake`     | Дьявол                     | Покачивание rotation                          |

---

## 🔥 Игровая механика

| Механика              | Описание                                                                 |
|-----------------------|--------------------------------------------------------------------------|
| **Heat System**       | Задача "остывает" от 100% (только создана) до 0% (мертва) за 48 часов    |
| **Purgatory**         | Через 24ч без touch → задача переходит в Чистилище                       |
| **Death**             | Через 48ч без touch → задача умирает, −5 очков                           |
| **Complete**          | Завершение задачи → +10 очков, задача летит в Рай                        |
| **Touch (обновить)**  | Сброс таймера, задача снова "горячая"                                    |
| **Kill (убить)**      | Ручное убийство → задача на кладбище, −5 очков                           |
| **Resurrect**         | Воскрешение с кладбища → −2 очка, задача снова активна                   |
| **Death Count**       | Счётчик смертей задачи (💀×N badge)                                      |
| **Angel Warnings**    | При heat ≤50% → "cooling down", при ≤25% → "almost dead" предупреждения |

---

## 📱 Адаптивность

- **Desktop:** max-width 700px контейнер, помощники по бокам
- **Mobile (<600px):**
  - Уменьшенный заголовок (2.2rem)
  - Компактная Score Panel
  - Уменьшённые аватары помощников (46px)
  - Более узкие speech bubbles (150px)
  - Grid кладбища/рая: minmax(140px, 1fr)
  - Увеличенный padding снизу для помощников

---

## 🎭 Фоновое оформление

- Три radial-gradient пятна на body::before (фиолетовое, голубое, розовое)
- Pointer-events: none для фона
- Fixed positioning для параллакс-эффекта при скролле

---

## 💾 Данные

- Хранение: `localStorage`
- Ключи: `soul_planner_tasks`, `soul_planner_score`
- Формат задачи:
```json
{
  "id": "string",
  "title": "string",
  "createdAt": "timestamp",
  "lastUpdatedAt": "timestamp",
  "status": "active | purgatory | dead | completed",
  "completedAt": "timestamp | null",
  "diedAt": "timestamp | null",
  "purgatoryAt": "timestamp | null",
  "resurrectedAt": "timestamp | null",
  "deathCount": "number"
}
```

---

## 🎯 Mood & Tone

- **Визуальная атмосфера:** Тёмная "потусторонняя", мистическая, но не пугающая — скорее готик-игровая
- **Тон персонажей:** Лёгкий юмор. Ангел — поддерживающий и энергичный. Дьявол — саркастичный, но не злой
- **Ощущение:** Увлекательная мини-игра, где задачи — это живые существа, и ты отвечаешь за их судьбу
- **Ключевые слова для дизайна:** Gothic gaming, dark fantasy UI, neon glows, souls, purgatory, heaven, fire & ice
